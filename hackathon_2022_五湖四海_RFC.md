# tidb_hackathon_2022_rfc

# 五湖四海团队

队长：张桥 

队员：書源，张泽龙，庾子浩

# SSO 实现 TiDB 登录权限校验

## 背景和动机

在实践中发现，互联网的时代，分散化的各种各样的系统越来越多，已经让人目不暇接，这时候我们总是一个个登录不一样的系统，由此产生的账号记录和消耗，已经成为一个重点的麻烦点。这时候我们需要一个统一的单点登录系统，这是由真实的需求驱动，因为通过单点系统我们可以将散落在不同地方的系统，整个统一管理起来，真正达到一次登录到处浏览，而不用登录一个就需要再次登录的尴尬处境。


## 项目介绍

### 单点登录

  单点登录的英文名叫做：Single Sign On（简称SSO），指在同一帐号平台下的多个应用系统中，用户只需登录一次，即可访问所有相互信任的系统。简而言之，多个系统，统一登陆。
  ![图片](https://img-blog.csdnimg.cn/f3f815973ee34efcaf3b99a70ebca2a6.png)

### 登录原理

sso需要一个独立的认证中心，所有子系统都通过认证中心的登录入口进行登录，登录时带上自己的地址，子系统只接受认证中心的授权，授权通过令牌（token）实现，sso认证中心验证用户的用户名密码正确，创建全局会话和token，token作为参数发送给各个子系统，子系统拿到token，即得到了授权，可以借此创建局部会话，局部会话登录方式与单系统的登录方式相同。

### 与TiDB的融合

sso系统会作为一个单独的认证系统进行运行，


## 项目设计

### 思路

编写 OAuth 服务， 构建 Token <-> 临时用户名/密码 映射，仅此服务知晓 Root 账户，进行临时用户的管理，如自动续期，提醒改密，动态密码等功能 与常见 ORM/Driver 进行组合，如直接使用 JDBC 配置 OAuth 登录，自动完成用户名/密码获取、登录等操作 与 使用 ProxySQL 与 TiDB 完成多租户 3 组合，完成 SSO + 多租户

### 单点登录原理流程

![图片](https://img-blog.csdnimg.cn/0cd6407fe18740d7818abc576b36d684.png)




## 项目分析
